document.addEventListener("DOMContentLoaded", function () {
    const faqItem = document.querySelector(".js-faqItem");
    if (faqItem) {
        document.querySelectorAll('.js-faqQuestion').forEach(function (question) {
            question.addEventListener('click', function () {
                console.log('123')
                // Переключаем класс active у родительского .faq-item
                this.parentElement.classList.toggle('active');
            });
        });
    }
});
document.addEventListener("DOMContentLoaded", function () {
    let inputPhone = document.querySelector('.js-inputPhone');
    if (inputPhone) {
        var maskOptions = {
          mask: '+{7} (000) 000-00-00'
        };
        var mask = IMask(inputPhone, maskOptions);
    }
});

document.addEventListener("DOMContentLoaded", function () {
    const burger = document.querySelector(".js-burger");
    const nav = document.querySelector(".js-nav");
    const navClose = document.querySelector(".js-navClose");
    const header = document.querySelector(".js-header");

    if (burger) {
        burger.addEventListener("click", function () {
            burger.classList.toggle("active");
            header.classList.toggle("active");
            nav.classList.toggle("active");

            if (nav.classList.contains("active")) {
                wrapperFixPosition();
            } else {
                wrapperUnfixPosition();
            }
        });
        navClose.addEventListener("click", function () {
            burger.classList.remove("active");
            header.classList.remove("active");
            nav.classList.remove("active");
            wrapperUnfixPosition();
        });
        document.addEventListener("click", function (event) {
            if (!nav.contains(event.target) && !burger.contains(event.target) && nav.classList.contains("active")) {
                burger.classList.remove("active");
                header.classList.remove("active");
                nav.classList.remove("active");
                wrapperUnfixPosition(); // при закрытии меню
            }
        });
    
    
        const toggles = document.querySelectorAll('.js-navToggle')
        toggles.forEach(function (toggle) {
            toggle.addEventListener('click', function () {
                let navItem = this.closest('.js-navItem');
                navItem.classList.toggle('active');
            });
        });
    }
});

function initGallerySliders() {
    const gallerySliders = document.querySelectorAll('.js-sliderCard');

    gallerySliders.forEach((slider) => {
        const paginationEl = slider.closest('.card').querySelector('.swiper-pagination-card');

        new Swiper(slider, {
            loop: true,         
            slidesPerView: 1, 
            autoHeight: false,
            pagination: {
                el: paginationEl,
                clickable: true, 
            },
        });
    });
}

document.addEventListener('DOMContentLoaded', initGallerySliders);

document.addEventListener("DOMContentLoaded", function () {
    const sliderCelebrate = document.querySelector(".js-sliderCelebrate");
    if (sliderCelebrate) {
        let swiperCelebrate; 
    
        function initSwiperCelebrate() {
            if (window.innerWidth < 1024) {
                if (!swiperCelebrate) { 
                    swiperCelebrate = new Swiper(sliderCelebrate, {
                        autoHeight: true,
                        spaceBetween: 16,
                        pagination: {
                            el: '.swiper-pagination-celebrate',
                            clickable: true,
                        },
                        breakpoints: {
                          768: {
                            slidesPerView: 'auto',
                            autoHeight: false,
                            spaceBetween: 24
                          },
                        }
                    });
                }
            } else {
                if (swiperCelebrate) {
                    swiperCelebrate.destroy();
                    swiperCelebrate = null; 
                }
            }
        }
    
        window.addEventListener('resize', initSwiperCelebrate);
        window.addEventListener('load', initSwiperCelebrate);
    }
});

document.addEventListener("DOMContentLoaded", function () {
    const sliderEvents = document.querySelector(".js-sliderEvents");
    if (sliderEvents) {
        let swiperEvents; 
    
        function initSliderEvents() {
            if (window.innerWidth < 768) {
                if (!swiperEvents) { 
                    swiperEvents = new Swiper(sliderEvents, {
                        autoHeight: true,
                        spaceBetween: 16,
                        pagination: {
                            el: '.swiper-pagination-events',
                            clickable: true,
                        }
                    });
                }
            } else {
                if (swiperEvents) {
                    swiperEvents.destroy();
                    swiperEvents = null; 
                }
            }
        }
    
        window.addEventListener('resize', initSliderEvents);
        window.addEventListener('load', initSliderEvents);
    }
});

document.addEventListener("DOMContentLoaded", function () {
    const sliderGallery = document.querySelector(".js-sliderGallery");
    if (sliderGallery) {
        let swiperGallery;

        function initSwiperGallery() {
            if (!swiperGallery) {
                swiperGallery = new Swiper(sliderGallery, {
                    slidesPerView: 1,
                    autoHeight: false,
                    spaceBetween: 24,
                    navigation: {
                        nextEl: '.swiper-button-next-gallery',
                        prevEl: '.swiper-button-prev-gallery',
                    },
                    pagination: {
                        el: '.swiper-pagination-gallery',
                        clickable: true,
                    }
                });
            }
        }

        window.addEventListener('resize', initSwiperGallery);
        window.addEventListener('load', initSwiperGallery);

    }
});

document.addEventListener("DOMContentLoaded", function () {
    const sliderMaster = document.querySelector(".js-sliderMaster");
    if (sliderMaster) {
        let swiperMaster; 
    
        function initSwiperMaster() {
            if (window.innerWidth < 768) {
                if (!swiperMaster) { 
                    swiperMaster = new Swiper(sliderMaster, {
                        autoHeight: true,
                        spaceBetween: 16,
                        pagination: {
                            el: '.swiper-pagination-masters',
                            clickable: true,
                        }
                    });
                }
            } else {
                if (swiperMaster) {
                    swiperMaster.destroy();
                    swiperMaster = null; 
                }
            }
        }
    
        window.addEventListener('resize', initSwiperMaster);
        window.addEventListener('load', initSwiperMaster);
    }
});

document.addEventListener("DOMContentLoaded", function () {
    const sliderMenu = document.querySelector(".js-sliderMenu");
    if (sliderMenu) {
        let swiperMenu; 
    
        function initSwiperMenu() {
            if (window.innerWidth < 768) {
                if (!swiperMenu) { 
                    swiperMenu = new Swiper(sliderMenu, {
                        autoHeight: true,
                        spaceBetween: 16,
                        pagination: {
                            el: '.swiper-pagination-menu',
                            clickable: true,
                        }
                    });
                }
            } else {
                if (swiperMenu) {
                    swiperMenu.destroy();
                    swiperMenu = null; 
                }
            }
        }
    
        window.addEventListener('resize', initSwiperMenu);
        window.addEventListener('load', initSwiperMenu);

    }
});

document.addEventListener("DOMContentLoaded", function () {
    const sliderReviews = document.querySelector(".js-sliderReviews");
    if (sliderReviews) {
        let swiperReviews; 
    
        function initSwiperReviews() {
            if (window.innerWidth < 768) {
                if (!swiperReviews) { 
                    swiperReviews = new Swiper(sliderReviews, {
                        autoHeight: true,
                        spaceBetween: 16,
                        pagination: {
                            el: '.swiper-pagination-reviews',
                            clickable: true,
                        }
                    });
                }
            } else {
                if (swiperReviews) {
                    swiperReviews.destroy();
                    swiperReviews = null; 
                }
            }
        }
    
        window.addEventListener('resize', initSwiperReviews);
        window.addEventListener('load', initSwiperReviews);

    }
});

document.addEventListener("DOMContentLoaded", function () {
    const sliderServices = document.querySelector(".js-sliderServices");
    if (sliderServices) {
        let swiperServices;
    
        function initSwiperServices() {
            const isMobile = window.innerWidth <= 1023;
    
            if (isMobile && !swiperServices) {
                swiperServices = new Swiper(sliderServices, {
                    slidesPerView: 1,
                    spaceBetween: 16,
                    pagination: {
                        el: ".swiper-pagination-services",
                        clickable: true,
                    },
                });
            } else if (!isMobile && swiperServices) {
                swiperServices.destroy(true, true);
                swiperServices = undefined;
            }
        }
        window.addEventListener("load", initSwiperServices);
        window.addEventListener("resize", initSwiperServices);
    }
});
document.addEventListener("DOMContentLoaded", function () {
    const sliderChefs = document.querySelector(".js-sliderChefs");
    if (sliderChefs) {
        let swiperChefs; 
    
        function initSwiperChefs() {
            if (window.innerWidth < 768) {
                if (!swiperChefs) { 
                    swiperChefs = new Swiper(sliderChefs, {
                        autoHeight: true,
                        spaceBetween: 16,
                        pagination: {
                            el: '.swiper-pagination-chefs',
                            clickable: true,
                        }
                    });
                }
            } else {
                if (swiperChefs) {
                    swiperChefs.destroy();
                    swiperChefs = null; 
                }
            }
        }
    
        window.addEventListener('resize', initSwiperChefs);
        window.addEventListener('load', initSwiperChefs);
    }
});

const scrollUpBtn = document.querySelector('.js-scrollUp');
const footer = document.querySelector('footer');
const calendar = document.querySelector('.js-calendar');
const footerContacts = document.querySelector('.js-footerContacts');

const showButtonThreshold = window.innerHeight;

const scrollHandler = () => {
    const scrollY = window.scrollY;
    const footerContactsRect = footerContacts.getBoundingClientRect();
    const buttonHeight = scrollUpBtn.offsetHeight;

    if (scrollY > showButtonThreshold) {
        scrollUpBtn.classList.add('show');
    } else {
        scrollUpBtn.classList.remove('show');
    }

    if (footerContactsRect.top < window.innerHeight) {
        scrollUpBtn.classList.add('fixed');
        scrollUpBtn.style.bottom = `${window.innerHeight - footerContactsRect.top + 40}px`;
    } else {
        scrollUpBtn.classList.remove('fixed');
        scrollUpBtn.style.bottom = '40px';
    }
};

const scrollHandlerCalendar = () => {
    const scrollY = window.scrollY;
    const footerContactsRect = footerContacts.getBoundingClientRect();

    if (footerContactsRect.top < window.innerHeight) {
        if (window.innerWidth >= 1280) {
            calendar.style.bottom = '80px'; 
        } else {
            calendar.style.bottom = `${window.innerHeight - footerContactsRect.top + 40}px`; // Иначе используем ранее установленное значение
        }
    } else {
        if (window.innerWidth >= 1280) {
            calendar.style.bottom = '92px';
        } else {
            calendar.style.bottom = '40px';
        }
    }
};

const scrollToTop = () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
};
if (scrollUpBtn) {
    scrollUpBtn.addEventListener('click', scrollToTop);
    window.addEventListener('scroll', scrollHandler);
}
if (calendar) {
    window.addEventListener('scroll', scrollHandlerCalendar);
}

function wrapperFixPosition() {
    const fixBlocks = document.querySelectorAll('.js-fixBlock');
    let paddingOffset = window.innerWidth - document.querySelector('body').offsetWidth + 'px';
    setTimeout(function () {
        if (!document.querySelector('body').hasAttribute('wrapper-body-scroll-fix')) {
            let scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
            fixBlocks.forEach((el) => {
                el.style.paddingRight = paddingOffset;
            });
            document.querySelector('body').style.overflow = 'hidden';
            document.querySelector('body').setAttribute('wrapper-body-scroll-fix', scrollPosition);
            document.querySelector('body').style.overflow = 'hidden';
            document.querySelector('body').style.position = 'fixed';
            //document.querySelector('body').style.top = '-' + scrollPosition + 'px';
            document.querySelector('body').style.top = '0';
            document.querySelector('body').style.left = '0';
            document.querySelector('body').style.width = '100%';
            document.querySelector('body').style.paddingRight = paddingOffset;
        }
    }, 15);
}
function wrapperUnfixPosition() {
    const fixBlocks = document.querySelectorAll('.js-fixBlock');
    if (document.querySelector('body').hasAttribute('wrapper-body-scroll-fix')) {
        let scrollPosition = document.querySelector('body').getAttribute('wrapper-body-scroll-fix');
        document.querySelector('body').removeAttribute('wrapper-body-scroll-fix');
        document.querySelector('body').style.overflow = '';
        document.querySelector('body').style.position = '';
        document.querySelector('body').style.top = '';
        document.querySelector('body').style.left = '';
        document.querySelector('body').style.width = '';
        window.scroll(0, scrollPosition);
        fixBlocks.forEach((el) => {
            el.style.paddingRight = '0px';
        });
        document.querySelector('body').style.paddingRight = '0px';
    }
}